<?xml version="1.0"?>
<config>
    <api2>
        <resource_groups>
            <shopgate_cloudapi translate="title" module="Shopgate_Cloudapi">
                <title>Shopgate Cloud API</title>
                <sort_order>10</sort_order>
                <children>
                    <shopgate_cloudapi_v2_auth translate="title" module="Shopgate_Cloudapi">
                        <title>Auth</title>
                        <sort_order>10</sort_order>
                        <children>
                            <shopgate_cloudapi_v2_auth_token translate="title" module="Shopgate_Cloudapi">
                                <title>Token</title>
                                <sort_order>10</sort_order>
                            </shopgate_cloudapi_v2_auth_token>
                        </children>
                    </shopgate_cloudapi_v2_auth>
                    <shopgate_cloudapi_v2_carts translate="title" module="Shopgate_Cloudapi">
                        <title>Cart</title>
                        <sort_order>20</sort_order>
                        <children>
                            <shopgate_cloudapi_v2_carts_items translate="title" module="Shopgate_Cloudapi">
                                <title>Cart Items</title>
                                <sort_order>10</sort_order>
                            </shopgate_cloudapi_v2_carts_items>
                            <shopgate_cloudapi_v2_carts_url translate="title" module="Shopgate_Cloudapi">
                                <title>Url</title>
                                <sort_order>20</sort_order>
                            </shopgate_cloudapi_v2_carts_url>
                            <shopgate_cloudapi_v2_carts_customer translate="title" module="Shopgate_Cloudapi">
                                <title>Customer</title>
                                <sort_order>30</sort_order>
                            </shopgate_cloudapi_v2_carts_customer>
                        </children>
                    </shopgate_cloudapi_v2_carts>
                    <shopgate_cloudapi_v2_customers>
                        <title>Customers</title>
                        <sort_order>25</sort_order>
                        <children>
                            <shopgate_cloudapi_v2_customers_addresses translate="title" module="Shopgate_Cloudapi">
                                <title>Addresses</title>
                                <sort_order>10</sort_order>
                            </shopgate_cloudapi_v2_customers_addresses>
                            <shopgate_cloudapi_v2_customers_email translate="title" module="Shopgate_Cloudapi">
                                <title>Email</title>
                                <sort_order>20</sort_order>
                            </shopgate_cloudapi_v2_customers_email>
                            <shopgate_cloudapi_v2_customers_password translate="title" module="Shopgate_Cloudapi">
                                <title>Password</title>
                                <sort_order>30</sort_order>
                            </shopgate_cloudapi_v2_customers_password>
                        </children>
                    </shopgate_cloudapi_v2_customers>
                    <shopgate_cloudapi_v2_products translate="title" module="Shopgate_Cloudapi">
                        <title>Products</title>
                        <sort_order>30</sort_order>
                    </shopgate_cloudapi_v2_products>
                    <shopgate_cloudapi_v2_categories translate="title" module="Shopgate_Cloudapi">
                        <title>Categories</title>
                        <sort_order>40</sort_order>
                    </shopgate_cloudapi_v2_categories>
                </children>
            </shopgate_cloudapi>
        </resource_groups>
        <resources>
            <shopgate_cloudapi_v2_auth_token translate="title" module="Shopgate_Cloudapi">
                <group>shopgate_cloudapi_v2_auth_token</group>
                <model>shopgate_cloudapi/api2_auth_token</model>
                <working_model>customer/customer</working_model>
                <title>Create for REST session</title>
                <sort_order>10</sort_order>
                <privileges>
                    <guest>
                        <create>1</create>
                    </guest>
                </privileges>
                <attributes translate="type user password" module="Shopgate_Cloudapi">
                    <type>Type</type>
                    <email>User</email>
                    <password>Password</password>
                </attributes>
                <force_attributes>
                    <guest>
                        <email>User</email>
                        <password>Password</password>
                        <grant_type>Grant Type</grant_type>
                    </guest>
                </force_attributes>
                <routes>
                    <route_v2_auth_token>
                        <route>/v2/auth/token</route>
                        <action_type>collection</action_type>
                    </route_v2_auth_token>
                </routes>
                <versions>2</versions><!-- Should be comma delimited when we produce version 3, e.g. 2,3 -->
            </shopgate_cloudapi_v2_auth_token>
            <shopgate_cloudapi_v2_carts>
                <group>shopgate_cloudapi_v2_carts</group>
                <model>shopgate_cloudapi/api2_carts</model>
                <working_model>checkout/cart</working_model>
                <title>User cart</title>
                <sort_order>30</sort_order>
                <privileges>
                    <!-- The Guest users uses admin privileges to get things done -->
                    <admin>
                        <create>1</create>
                        <retrieve>1</retrieve>
                    </admin>
                    <customer>
                        <create>1</create>
                        <retrieve>1</retrieve>
                    </customer>
                </privileges>
                <routes>
                    <route_v2_carts>
                        <route>/v2/carts</route>
                        <action_type>collection</action_type>
                    </route_v2_carts>
                    <route_v2_carts_id>
                        <route>/v2/carts/:cartId</route>
                        <action_type>entity</action_type>
                    </route_v2_carts_id>
                </routes>
                <versions>2</versions>
            </shopgate_cloudapi_v2_carts>
            <shopgate_cloudapi_v2_carts_items>
                <group>shopgate_cloudapi_v2_carts_items</group>
                <model>shopgate_cloudapi/api2_carts_items</model>
                <title>Item manipulation</title>
                <sort_order>40</sort_order>
                <privileges>
                    <customer>
                        <create>1</create>
                        <delete>1</delete>
                    </customer>
                    <admin>
                        <create>1</create>
                        <delete>1</delete>
                    </admin>
                </privileges>
                <force_attributes>
                    <admin>
                        <product>Product Data</product>
                        <coupon>Coupon Data</coupon>
                        <cartItemId>Cart Item ID to update</cartItemId>
                        <cartItemIds>Cart item IDs to delete inside the cart</cartItemIds>
                    </admin>
                    <customer>
                        <product>Product Data</product>
                        <coupon>Coupon Data</coupon>
                        <cartItemId>Cart Item ID to update</cartItemId>
                        <cartItemIds>Cart item IDs to delete inside the cart</cartItemIds>
                    </customer>
                </force_attributes>
                <routes>
                    <route_v2_carts_id_items>
                        <route>/v2/carts/:cartId/items</route>
                        <action_type>collection</action_type>
                    </route_v2_carts_id_items>
                    <route_v2_carts_id_items_id>
                        <route>/v2/carts/:cartId/items/:itemId</route>
                        <action_type>collection</action_type>
                    </route_v2_carts_id_items_id>
                </routes>
                <versions>2</versions>
            </shopgate_cloudapi_v2_carts_items>
            <shopgate_cloudapi_v2_carts_url>
                <group>shopgate_cloudapi_v2_carts_url</group>
                <model>shopgate_cloudapi/api2_carts_url</model>
                <title>Checkout</title>
                <sort_order>50</sort_order>
                <privileges>
                    <customer>
                        <create>1</create>
                    </customer>
                    <admin>
                        <create>1</create>
                    </admin>
                </privileges>
                <routes>
                    <route_v2_carts_id_checkout_url>
                        <route>/v2/carts/:cartId/checkoutUrl</route>
                        <action_type>collection</action_type>
                    </route_v2_carts_id_checkout_url>
                </routes>
                <versions>2</versions>
            </shopgate_cloudapi_v2_carts_url>
            <shopgate_cloudapi_v2_carts_customer>
                <group>shopgate_cloudapi_v2_carts_customer</group>
                <model>shopgate_cloudapi/api2_carts_customer</model>
                <title>Cart Merge</title>
                <sort_order>60</sort_order>
                <privileges>
                    <customer>
                        <create>1</create>
                    </customer>
                </privileges>
                <routes>
                    <route_v2_carts_id_customer>
                        <route>/v2/carts/:cartId/customer</route>
                        <action_type>collection</action_type>
                    </route_v2_carts_id_customer>
                </routes>
                <versions>2</versions>
            </shopgate_cloudapi_v2_carts_customer>
            <shopgate_cloudapi_v2_customers>
                <group>shopgate_cloudapi_v2_customers</group>
                <model>shopgate_cloudapi/api2_customers</model>
                <working_model>customer/customer</working_model>
                <title>Information</title>
                <sort_order>65</sort_order>
                <privileges>
                    <customer>
                        <retrieve>1</retrieve>
                        <create>1</create>
                    </customer>
                </privileges>
                <attributes translate="entity_id last_logged_in firstname lastname email website_id created_in group_id confirmation disable_auto_group_change" module="api2">
                    <entity_id>Customer ID</entity_id>
                    <last_logged_in>Last Logged In</last_logged_in>
                    <firstname>First Name</firstname>
                    <lastname>Last Name</lastname>
                    <middlename>Middle Name</middlename>
                    <email>Email</email>
                    <website_id>Associate to Website</website_id>
                    <created_in>Created From</created_in>
                    <group_id>Group</group_id>
                    <confirmation>Is Confirmed</confirmation>
                    <disable_auto_group_change>Disable automatic group change based on VAT ID</disable_auto_group_change>
                </attributes>
                <exclude_attributes>
                    <customer>
                        <read>
                            <entity_id>1</entity_id>
                            <last_logged_in>1</last_logged_in>
                            <website_id>1</website_id>
                            <created_in>1</created_in>
                            <disable_auto_group_change>1</disable_auto_group_change>
                            <confirmation>1</confirmation>
                            <created_at>1</created_at>
                        </read>
                        <write>
                            <entity_id>1</entity_id>
                            <email>1</email>
                            <last_logged_in>1</last_logged_in>
                            <website_id>1</website_id>
                            <created_in>1</created_in>
                            <group_id>1</group_id>
                            <disable_auto_group_change>1</disable_auto_group_change>
                            <confirmation>1</confirmation>
                            <created_at>1</created_at>
                        </write>
                    </customer>
                </exclude_attributes>
                <validators>
                    <eav>
                        <customer>
                            <entity_model>customer/customer</entity_model>
                            <form_model>customer/form</form_model>
                            <form_code>
                                <update>customer_account_edit</update>
                            </form_code>
                        </customer>
                    </eav>
                </validators>
                <routes>
                    <route_v2_customers_id>
                        <route>/v2/customers/:customer_id</route>
                        <action_type>entity</action_type>
                    </route_v2_customers_id>
                    <route_v2_customers_me>
                        <route>/v2/customers/me</route>
                        <action_type>entity</action_type>
                    </route_v2_customers_me>
                </routes>
                <versions>2</versions>
            </shopgate_cloudapi_v2_customers>
            <shopgate_cloudapi_v2_customers_addresses>
                <group>shopgate_cloudapi_v2_customers_addresses</group>
                <model>shopgate_cloudapi/api2_customers_addresses</model>
                <working_model>customer/address</working_model>
                <title>Addresses</title>
                <sort_order>66</sort_order>
                <privileges>
                    <customer>
                        <retrieve>1</retrieve>
                        <create>1</create>
                        <delete>1</delete>
                    </customer>
                </privileges>
                <attributes translate="entity_id is_default_billing is_default_shipping ids" module="api2">
                    <entity_id>Customer Address ID</entity_id>
                    <is_default_billing>Is Default Billing Address</is_default_billing>
                    <is_default_shipping>Is Default Shipping Address</is_default_shipping>
                    <ids>Filter Address IDs</ids>
                </attributes>
                <exclude_attributes>
                    <customer>
                        <read>
                            <region_id>1</region_id>
                        </read>
                        <write>
                            <entity_id>1</entity_id>
                            <region_id>1</region_id>
                        </write>
                    </customer>
                </exclude_attributes>
                <validators>
                    <eav>
                        <customer>
                            <entity_model>customer/address</entity_model>
                            <form_model>customer/form</form_model>
                            <form_code>
                                <update>customer_address_edit</update>
                            </form_code>
                        </customer>
                    </eav>
                </validators>
                <routes>
                    <route_v2_customers_id_addresses>
                        <route>/v2/customers/:customer_id/addresses</route>
                        <action_type>collection</action_type>
                    </route_v2_customers_id_addresses>
                    <route_v2_customers_id_addresses_id>
                        <route>/v2/customers/:customer_id/addresses/:id</route>
                        <action_type>entity</action_type>
                    </route_v2_customers_id_addresses_id>
                </routes>
                <versions>2</versions>
            </shopgate_cloudapi_v2_customers_addresses>
            <shopgate_cloudapi_v2_customers_email>
                <group>shopgate_cloudapi_v2_customers_email</group>
                <model>shopgate_cloudapi/api2_customers_email</model>
                <title>Email</title>
                <sort_order>67</sort_order>
                <privileges>
                    <customer>
                        <create>1</create>
                    </customer>
                </privileges>
                <force_attributes>
                    <customer>
                        <email>New email address</email>
                    </customer>
                </force_attributes>
                <validators>
                    <eav>
                        <customer>
                            <entity_model>customer/customer</entity_model>
                            <form_model>customer/form</form_model>
                            <form_code>
                                <update>customer_account_edit</update>
                            </form_code>
                        </customer>
                    </eav>
                </validators>
                <routes>
                    <route_v2_customers_id_email>
                        <route>/v2/customers/:customer_id/email</route>
                        <action_type>entity</action_type>
                    </route_v2_customers_id_email>
                </routes>
                <versions>2</versions>
            </shopgate_cloudapi_v2_customers_email>
            <shopgate_cloudapi_v2_customers_password>
                <group>shopgate_cloudapi_v2_customers_password</group>
                <model>shopgate_cloudapi/api2_customers_password</model>
                <title>Password</title>
                <sort_order>68</sort_order>
                <privileges>
                    <customer>
                        <create>1</create>
                    </customer>
                </privileges>
                <force_attributes>
                    <customer>
                        <oldPassword>Old password to validate against</oldPassword>
                        <password>New Password</password>
                    </customer>
                </force_attributes>
                <validators>
                    <eav>
                        <customer>
                            <entity_model>customer/customer</entity_model>
                            <form_model>customer/form</form_model>
                            <form_code>
                                <update>customer_account_edit</update>
                            </form_code>
                        </customer>
                    </eav>
                </validators>
                <routes>
                    <route_v2_customers_id_password>
                        <route>/v2/customers/:customer_id/password</route>
                        <action_type>entity</action_type>
                    </route_v2_customers_id_password>
                </routes>
                <versions>2</versions>
            </shopgate_cloudapi_v2_customers_password>
            <shopgate_cloudapi_v2_products>
                <group>shopgate_cloudapi_v2_products</group>
                <model>shopgate_cloudapi/api2_products</model>
                <title>Product retrieval</title>
                <sort_order>70</sort_order>
                <privileges>
                    <admin>
                        <retrieve>1</retrieve>
                    </admin>
                    <customer>
                        <retrieve>1</retrieve>
                    </customer>
                </privileges>
                <routes>
                    <route_v2_products>
                        <route>/v2/products</route>
                        <action_type>collection</action_type>
                    </route_v2_products>
                    <route_v2_products_id>
                        <route>/v2/products/:id</route>
                        <action_type>entity</action_type>
                    </route_v2_products_id>
                </routes>
                <versions>2</versions>
            </shopgate_cloudapi_v2_products>
            <shopgate_cloudapi_v2_categories>
                <group>shopgate_cloudapi_v2_categories</group>
                <model>shopgate_cloudapi/api2_categories</model>
                <title>Category retrieval</title>
                <sort_order>80</sort_order>
                <privileges>
                    <admin>
                        <retrieve>1</retrieve>
                    </admin>
                    <customer>
                        <retrieve>1</retrieve>
                    </customer>
                </privileges>
                <routes>
                    <route_v2_categories>
                        <route>/v2/categories</route>
                        <action_type>collection</action_type>
                    </route_v2_categories>
                    <route_v2_categories_id>
                        <route>/v2/categories/:id</route>
                        <action_type>entity</action_type>
                    </route_v2_categories_id>
                </routes>
                <versions>2</versions>
            </shopgate_cloudapi_v2_categories>
        </resources>
    </api2>
</config>
